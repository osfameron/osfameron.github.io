<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Fleece C API | Couchbase Capella Staging Docs</title>
<link rel="canonical" href="https://docs.stage.nonprod-project-avengers.com/couchbase-lite/3.0/c/c_fleece.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Introducing the key concepts of the Fleece C API">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="couchbase-lite">
<meta name="dcterms.identifier" content="3.0">
<meta name="page-url" content="/couchbase-lite/3.0/c/c_fleece.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/hakimcassimally/couchbase/docs-couchbase-lite/modules/c/pages/c_fleece.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Couchbase Lite</a></li>
<li class="crumb"><a href="quickstart.html">C</a></li>
<li class="crumb"><a href="c_fleece.html">Fleece API</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Fleece C API</h1>
<div class="labels">
<ul>
<li class="status"><span>{prerelease}</span></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Description&#8201;&#8212;&#8201;<em>Introducing the key concepts of the Fleece C API</em><br></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Couchbase&#160;Lite</em> for C makes extensive use of the Fleece C API for accessing document data.
This content introduces some basic Fleece API concepts and examples.</p>
</div>
<div class="paragraph">
<p>Fleece is a binary encoding for semi-structured data.
Its data model is a superset of JSON, adding support for binary data (blobs) to give seven data types: null, boolean, numbers, strings, data, arrays, and dictionaries.
Arrays can contain any data types.
Dictionary keys are strings, with values of any data type.</p>
</div>
<div class="paragraph">
<p>Fleece is designed to be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Very fast to read:<br>
No parsing is needed, and the data can be navigated and read without any heap allocation.
Fleece objects are internal pointers into the raw data.
Arrays and dictionaries can be random-accessed.
Performance on real-world-scale data has been clocked at 20x that of JSON.</p>
</li>
<li>
<p>Compact:<br>
Simple values will be about the same size as JSON.
Complex ones may be much smaller, since repeated values, especially strings, only need to be stored once.</p>
</li>
<li>
<p>Efficient to convert into native objects:<br>
Numbers are binary, strings are raw UTF-8 without quoting, binary data is not base64-encoded.
Storing repeated values once means they only need to be converted into native objects once.</p>
</li>
<li>
<p>Appendable:<br>
Fleece is what&#8217;s known as a persistent data structure.
A Fleece document can be mutated by appending data to it.
The mutation is in effect a delta, so it&#8217;s usually much smaller than the original document.
And the original document is unchanged, which is great for concurrency as well as (simple) version control.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">For more information, see</dt>
<dd>
<p><a href="https://github.com/couchbaselabs/fleece">Fleece on GitHub</a> |
<a href="https://github.com/couchbaselabs/fleece/wiki/Using-Fleece">Using Fleece</a> |
<a href="https://github.com/couchbaselabs/fleece/blob/master/API/fleece/Fleece.h">Fleece Header File</a></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="values"><a class="anchor" href="#values"></a>Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fleece’s data types are almost identical to those of JSON, with the notable addition of binary data types.</p>
</div>
<div class="paragraph">
<p>Basically Fleece provides seven data types: <em>null</em>, <em>boolean</em>, <em>numbers</em>, <em>strings</em>, <em>arrays</em>, <em>dictionaries</em>, and <em>data</em>.
Arrays can contain any data type and dictionaries have strings as keys, with values of any data type.</p>
</div>
<div class="paragraph">
<p>The basic Fleece data type is <strong>FLValue</strong>, an opaque pointer reference to a value of any type.</p>
</div>
<div class="paragraph">
<p>Use the <em>FLValue_GetType</em> API to check the value&#8217;s actual type and <em>FLValue_As&lt;Type Name&gt;</em> to get the actual value as shown in <a href="#ex-flvalue">Use FLValue</a></p>
</div>
<div id="ex-flvalue" class="listingblock">
<div class="title">Use FLValue</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLDict props = CBLDocument_Properties(doc);
FLValue value = FLDict_Get(props, FLSTR("name”));
FLValueType type = FLValue_GetType(value); <i class="conum" data-value="1"></i><b>(1)</b>
if (type == kFLString) {
    FLString name = FLValue_AsString(value);
    doSomethingWith(name); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Find the values data type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Cast to appropriate type</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See: <a href="https://github.com/couchbaselabs/fleece/blob/master/API/fleece/Fleece.h">Fleece Header File</a> for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="slices-and-strings"><a class="anchor" href="#slices-and-strings"></a>Slices and Strings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="flslice"><a class="anchor" href="#flslice"></a>FLSlice</h3>
<div class="paragraph">
<p>Another basic Fleece data type, <em>FLSlice</em> a simple struct consisting of a pointer and a length.
It points to a block of memory, without implying ownership of that memory.
FLSlice is used to represent both binary data and strings.</p>
</div>
</div>
<div class="sect2">
<h3 id="flstring"><a class="anchor" href="#flstring"></a>FLString</h3>
<div class="paragraph">
<p><em>FLString</em> is a typedef of FLSlice, which explicitly represents a string value.
Use the <em>FLSTR(“Some String”)</em> macro to create an FLString from a string literal&#8201;&#8212;&#8201;see: <a href="#ex-flstr">Create an FLString</a></p>
</div>
<div id="ex-flstr" class="listingblock">
<div class="title">Create an FLString</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">CBLDatabase* db = CBLDatabase_Open( (FLSTR("my-database"), NULL, &amp;err); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>FLSTR("My-database") creates the FLString from the given string literal.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="flsliceresultflstringresult"><a class="anchor" href="#flsliceresultflstringresult"></a>FLSliceResult/FLStringResult</h3>
<div class="paragraph">
<p>FLSlice doesn’t imply an ownership of memory.
However, <em>FLSliceResult</em>/<em>FLStringResult</em> is an FLSlice type which <em>does</em> own memory and is reference-counted.<br></p>
</div>
<div class="paragraph">
<p>In general, whenever an FLSliceResult/FLStringResult is returned from an API call, you are responsible for calling FLSliceResult_Release when you are done using it.</p>
</div>
<div class="paragraph">
<p>For an example of <code>FLSliceResult</code> in use, see: <a href="#ex-flsliceresult">Using FLStringResult</a>.</p>
</div>
<div id="ex-flsliceresult" class="listingblock">
<div class="title">Using FLStringResult</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLStringResult path = CBLDatabase_Path(db);
doSomethingWith(path);
FLSliceResult_Release(path); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You are responsible for calling FLSliceResult_Release when you are done using it.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>FLSlice and FLSliceResult have utility functions such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FLSlice_Equal</code>&#8201;&#8212;&#8201;compares two slices for equality.</p>
</li>
<li>
<p><code>FLSlice_Compare</code>&#8201;&#8212;&#8201;a 3-way comparison, like strcmp().</p>
</li>
<li>
<p><code>FLSlice_Copy</code></p>
</li>
<li>
<p><code>FLSliceResult_New</code></p>
</li>
<li>
<p><code>FLSliceResults_Release</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="null-slices"><a class="anchor" href="#null-slices"></a>Null Slices</h3>
<div class="paragraph">
<p>The null slice {NULL, 0} is represented by the constant <code>kFLSliceNull</code>.<br>
You test a slice for null by comparing its pointer (buf) with NULL&#8201;&#8212;&#8201;see: <a href="#ex-flnullslice">Test for null slice</a></p>
</div>
<div id="ex-flnullslice" class="listingblock">
<div class="title">Test for null slice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLValue value = FLDict_Get(props, FLSTR("name”));
FLString name = FLValue_AsString(value);
if (name.buf != NULL) {
    doSomethingWith(name);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://github.com/couchbaselabs/fleece/blob/master/API/fleece/FLSlice.h">FLSlice.h</a> for more details on data slices.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dictionaries"><a class="anchor" href="#dictionaries"></a>Dictionaries</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="immutable"><a class="anchor" href="#immutable"></a>Immutable</h3>
<div class="paragraph">
<p><em>FLDict</em> represents an immutable dictionary type in Fleece.<br>
To access a value with a string key from a dictionary, use FLDict_Get&#8201;&#8212;&#8201;as shown in: <a href="#ex-flget">Get dictionary value</a>.</p>
</div>
<div id="ex-flget" class="listingblock">
<div class="title">Get dictionary value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLDict props = CBLDocument_Properties(doc);
FLValue value = FLDict_Get(props, FLSTR("name”));
doSomethingWith(value);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To iterate through each key-value pair in the dictionary, use <em>FLDictIterator</em>, as shown in: <a href="#ex-fliterator">Iterate key-value pairs in dictionary</a></p>
</div>
<div id="ex-fliterator" class="listingblock">
<div class="title">Iterate key-value pairs in dictionary</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLDictIterator iter;
FLDictIterator_Begin(myDict, &amp;iter);
FLValue value;
while (NULL != (value = FLDictIterator_GetValue(&amp;iter))) {
    FLString key = FLDictIterator_GetKeyString(&amp;iter);
    doSomethingWith(key, value);
    FLDictIterator_Next(&amp;iter);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mutable"><a class="anchor" href="#mutable"></a>Mutable</h3>
<div class="paragraph">
<p><strong>FLMutableDictionary</strong> is a mutable dictionary type that allows editing.</p>
</div>
<div class="paragraph">
<p>To create a new mutable dictionary, use FLMutableDict_New()&#8201;&#8212;&#8201;see: <a href="#ex-flmutabledict-new">Set dictionary value</a>.</p>
</div>
<div id="ex-flmutabledict-new" class="listingblock">
<div class="title">Set dictionary value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLMutableDict myDict = FLMutableDict_New()
FLMutableDict_SetString(myDict, FLSTR(“name”), FLSTR(“John Doe”));
doSomethingWith(myDict);
FLMutableDict_Release(myDict); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>don&#8217;t forget to release resources once you have finished with them</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lbl-fleece-arrays"><a class="anchor" href="#lbl-fleece-arrays"></a>Arrays</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="immutable-2"><a class="anchor" href="#immutable-2"></a>Immutable</h3>
<div class="paragraph">
<p><em>FLArray</em> represents an immutable array type in Fleece.<br>
use <em>FLArray_Count</em> and <em>FLArray_Get</em> respectively, to get the numbers of values in an array and to get a value using with an index&#8201;&#8212;&#8201;as shown in <a href="#ex-flarray-get">Use arrays</a>.</p>
</div>
<div id="ex-flarray-get" class="listingblock">
<div class="title">Use arrays</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int count = FLArray_Count(myArray);
if (count &gt; 0) {
    FLValue value = FLArray_Get(0);
    doSomethingWith(value);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <em>FLArrayIterator</em> to iterate through arrays, as shown in : <a href="#ex-array-iteration">Array iteration</a>.</p>
</div>
<div id="ex-array-iteration" class="listingblock">
<div class="title">Array iteration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLArrayIterator iter;
FLArrayIterator_Begin(myArray, &amp;iter);
FLValue value;
while (NULL != (value = FLArrayIterator_GetValue(&amp;iter))) {
    doSomethingWith(value);
    FLArrayIterator_Next(&amp;iter);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mutable-2"><a class="anchor" href="#mutable-2"></a>Mutable</h3>
<div class="paragraph">
<p><em>FLMutableArray</em> is a mutable array type that allows editing.<br></p>
</div>
<div class="paragraph">
<p>To create a new mutable array, use <em>FLMutableArray_New</em>.</p>
</div>
<div class="paragraph">
<p>To append a value into the array, use <em>FLMutableArray_Append&lt;Type Name&gt;</em>.</p>
</div>
<div id="ex-flmutable-array-append" class="listingblock">
<div class="title">Append values to array</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLMutableArray myArray = FLMutableArray_New();
FLMutableArray_AppendString(myArray, FLSTR(“String 1”));
FLMutableArray_AppendString(myArray, FLSTR(“String 2”)); <i class="conum" data-value="1"></i><b>(1)</b>
doSomethingWith(myArray);
FLMutableArray_Release(myArray)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To set a value at a specific array index, use FLMutableArraySet&lt;Type Name&gt;.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json-support"><a class="anchor" href="#json-support"></a>JSON Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fleece provides a JSON utility that allows you to parse JSON string into Fleece or generate JSON from Fleece.</p>
</div>
<div class="sect2">
<h3 id="parsing-json"><a class="anchor" href="#parsing-json"></a>Parsing JSON</h3>
<div class="paragraph">
<p>Use <strong>FLDoc_FromJSON</strong> to convert JSON Dictionary or Array into Fleece Dictionary or Array.</p>
</div>
<div id="ex-json-parse" class="listingblock">
<div class="title">Parse JSON data to Fleece</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLError error;
FLDoc doc = FLDoc_FromJSON(jsonString, &amp;error);
if (doc) {
    FLValue value = FLDoc_GetRoot(doc);
    FLDict dict = FLValue_AsDict(value);
    doSomethingWith(dict);
}
FLDoc_Release(doc);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="generating-json"><a class="anchor" href="#generating-json"></a>Generating JSON</h3>
<div class="paragraph">
<p>Use FLValue_ToJSON to convert FLValue into JSON string</p>
</div>
<div id="ex-json-from-fleese" class="listingblock">
<div class="title">Convert to JSON</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">FLDict props = CBLDocument_Properties(doc);
FLStringResult jsonString = FLValue_ToJSON((FLValue) props);
doSomethingWith(jsonString);
FLSliceResult_Release(jsonString);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="memory-management"><a class="anchor" href="#memory-management"></a>Memory Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In general, Mutable objects are <em>reference counted</em>: with MutableArray and Mutable Dictionary each having  <em>retain</em> and <em>release</em> functions.<br>
The lifespan of Immutable objects is the same as that of the memory block from which they are parsed.
They cannot be individually released or retained.</p>
</div>
<div class="paragraph">
<p>For more see:<br>
<a href="https://github.com/couchbaselabs/fleece/wiki/Using-Fleece#5-memory-management">Fleece Mememory Management</a> |
<a href="https://github.com/couchbaselabs/fleece/wiki/Advanced-Fleece#for-memory-management">Advanced Fleece Mememory Management</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id=""><a class="anchor" href="#"></a></h6>
<div class="ulist">
<div class="title">How to . . .</div>
<ul>
<li>
<p><a href="gs-prereqs.html" class="xref page">Prerequisites</a></p>
</li>
<li>
<p><a href="gs-install.html" class="xref page">Install</a></p>
</li>
<li>
<p><a href="gs-build.html" class="xref page">Build and Run</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">Learn more . . .</div>
<ul>
<li>
<p><a href="database.html" class="xref page">Databases</a></p>
</li>
<li>
<p><a href="document.html" class="xref page">Documents</a></p>
</li>
<li>
<p><a href="blob.html" class="xref page">Blobs</a></p>
</li>
<li>
<p><a href="replication.html" class="xref page">Remote Sync Gateway</a></p>
</li>
<li>
<p><a href="conflict.html" class="xref page">Handling Data Conflicts</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="paragraph">
<div class="title">Dive Deeper . . .</div>
<p><a href="https://forums.couchbase.com/c/mobile/14">Mobile Forum</a> |
<a href="https://blog.couchbase.com/">Blog</a> |
<a href="https://docs.couchbase.com/tutorials/">Tutorials</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Mobile","components":["couchbase-lite","sync-gateway"],"url":"/home/mobile.html","latestVersions":{"couchbase-lite":"3.0","sync-gateway":"3.0"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
