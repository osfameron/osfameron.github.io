<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Logging | Couchbase Capella Staging Docs</title>
<link rel="canonical" href="https://docs.stage.nonprod-project-avengers.com/sync-gateway/3.0/logging.html">
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Introducing Couchbase Sync Gateway&#x27;s logging functionality">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="sync-gateway">
<meta name="dcterms.identifier" content="3.0">
<meta name="page-url" content="/sync-gateway/3.0/logging.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/hakimcassimally/couchbase/docs-sync-gateway/modules/ROOT/pages/logging.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="index.html">Sync Gateway</a></li>
<li class="crumb">Manage</li>
<li class="crumb">Logging and Troubleshooting</li>
<li class="crumb"><a href="logging.html">Logging</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Logging</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Introducing Couchbase Sync Gateway&#8217;s logging functionality<br>
Sync Gateway&#8217;s _Continuous Logging_ feature delivers flexible log generation and retention, without compromising the availability of diagnostic information necessary to provide effective support and maintenance.</p>
</div>
</blockquote>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Constraints</div>
<div class="paragraph">
<p>Do not use the <code>logs</code> directory as a storage location for files that should not be there. Permission issues with those files can prevent Sync Gateway from starting.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sync Gateway provides a robust <a href="#lbl-continuous-logging">Continuous Logging</a><sup class="footnote" id="_footnote_fn-clog">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> solution that delivers flexibility in terms of how logs are generated and retained, whilst also maintaining the level of logging required by Couchbase Support for investigation of issues.
Its logs are written to <a href="#log-file-outputs">separate log files</a> filtered by log level, with each log level supporting individual retention policies.
You control what is logged using the <a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap Configuration</a> <a href="configuration-schema-bootstrap.html#logging" class="xref page">logging</a> properties
<sup class="footnoteref red" title="Unresolved footnote reference.">[fnleg3-0]</sup>.</p>
</div>
<div class="paragraph">
<p>In addition to the log files, you can also independently configure and control <a href="#lbl-console-logs">Console Logging</a>, which is a convenient method of accessing diagnostic information during debugging scenarios.
With <em>console logging</em>, system administrators can easily fine-tune diagnostic output to suit specific debug scenarios.
All without interfering with the logging required by Couchbase Support for the investigation of issues.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You configure <em>continuous</em> and <em>console</em> logging requirements in the <a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap Configuration</a> file, using the <a href="configuration-schema-bootstrap.html#logging" class="xref page">logging</a> properties <sup class="footnote" id="_footnote_fnleg3-0">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> &#8201;&#8212;&#8201;see: <a href="#sample-log-cfg">Example 1</a>.</p>
</div>
<div id="sample-log-cfg" class="exampleblock">
<div class="title">Example 1. Sample Logging Configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "logging": {
    "log_file_path": "/var/tmp/sglogs", <i class="conum" data-value="1"></i><b>(1)</b>
    "redaction_level": "partial", <i class="conum" data-value="2"></i><b>(2)</b>
    "console": { <i class="conum" data-value="3"></i><b>(3)</b>
      "log_level": "debug",
      "log_keys": ["*"]
      }, <i class="conum" data-value="4"></i><b>(4)</b>
    "error": { <i class="conum" data-value="5"></i><b>(5)</b>
      "enabled": true,
      "rotation": {
        "max_size": 20,
        "max_age": 180
        }
      },
    "warn": { <i class="conum" data-value="6"></i><b>(6)</b>
      "enabled": true,
      "rotation": {
        "max_size": 20,
        "max_age": 90
        }
      },
    "info": { <i class="conum" data-value="7"></i><b>(7)</b>
      "enabled": false
    },
    "debug": { <i class="conum" data-value="8"></i><b>(8)</b>
      "enabled": false
      }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the path to the log file(s)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Define the optional redaction level, here we select "partial" redaction&#8201;&#8212;&#8201;see: <a href="#lbl-log-redaction">Log Redaction</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Here we define the <a href="#lbl-console-logs">Console Logging</a> levels we require for debugging.
In this instance turning on <em>debug</em> level output for <em>all</em> available log_keys&#8201;&#8212;&#8201;see: <a href="configuration-schema-bootstrap.html#logging-console-log_keys" class="xref page">logging.console.log_keys</a> <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The following logging properties enable, or disable, <a href="#lbl-continuous-logging">Continuous Logging</a> at the specified level&#8201;&#8212;&#8201;see: <a href="configuration-schema-bootstrap.html#logging-console-log_level" class="xref page">logging.console.log_level</a> <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Here we set <code>error</code> level logging on and define the log-file rotation, for <em>errors</em> messages</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Here we set <code>warn</code> level logging on and define the log-file rotation, for <em>warnings</em> messages</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Here we set <code>info</code> level logging off; we do not define the log-file rotation</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Here we set <code>debug</code> level logging off; we do not define the log-file rotation</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See: <a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap Configuration</a> for more information on these settings <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lbl-log-redaction"><a class="anchor" href="#lbl-log-redaction"></a>Log Redaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All log outputs&#8201;&#8212;&#8201;<em>console</em> or <em>continuous</em>&#8201;&#8212;&#8201;can optionally be redacted, which will remove any user-data considered private.</p>
</div>
<div class="paragraph">
<p>You enable this feature by setting the <a href="configuration-schema-bootstrap.html#logging-redaction_level" class="xref page">logging.redaction_level</a> property <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lbl-console-logs"><a class="anchor" href="#lbl-console-logs"></a>Console Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>In this section</strong>: <a href="#lbl-log-levels">Log Levels</a>  | <a href="#lbl-log-api">Admin REST API</a> |  <a href="#lbl-log-keys">Log Keys</a>  | <a href="#lbl-log-color">Set Log Color</a>  | <a href="#lbl-log-redirect">Redirect Console Log</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By default only HTTP logging is enabled
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Console logs are your go-to resource for diagnostic information.
You can easily fine-tune their diagnostic content to meet the needs of a particular debugging scenario, perhaps by increasing the verbosity and filtering out unnecessary log_keys to better focus on the problem area.</p>
</div>
<div class="paragraph">
<p>Changes to <em>console logging</em> are independent of continuous logging, so you can, for example, tweak any of the following without compromising the core continuous logging streams:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increase the verbosity using <a href="#lbl-log-levels">Log Levels</a> to generate additional diagnostic information</p>
</li>
<li>
<p>Focus on the area under investigation by enabling or disabling specific <a href="#lbl-log-keys">Log Keys</a></p>
</li>
<li>
<p>Enhance readability by setting a <a href="#log-color">color</a> for log output based on log level</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="lbl-log-api"><a class="anchor" href="#lbl-log-api"></a>Admin REST API</h3>
<div class="paragraph">
<p>You can define console log settings in the bootstrap configuration file, or more conveniently, you can use the Admin REST API&#8217;s <code>_config</code> endpoint to set them&#8201;&#8212;&#8201;see: <a href="#eg-setloggingwithapi">Example 2</a>.</p>
</div>
<div id="eg-setloggingwithapi" class="exampleblock">
<div class="title">Example 2. Setting log_level and log_keys with API</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">curl --location --request PUT 'http://localhost:4985/_config' \
--header 'Content-Type: application/json' \
--data-raw '{
    "console": {

        "log_level": "trace", <i class="conum" data-value="1"></i><b>(1)</b>
        "log_keys": "[\"WS\",\"WSFrame\",\"Replicate\"]",  <i class="conum" data-value="2"></i><b>(2)</b>

    }
  }'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here we define the <em>log_level</em> to be <code>trace</code> for maximum verbosity</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here we specify the particular <em>log_keys</em> we want to focus on.<br>
Note here we have chosen to exclude <code>http</code>; perhaps we want to focus on a websocket or replication issue.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The console log will show the following after this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">2021-01-08T13:26:23.884Z [INF] HTTP:  #110: POST /_logging?logLevel=trace (as ADMIN)
2021-01-08T13:26:23.885Z [INF] Setting log level to: trace
2021-01-08T13:26:23.885Z [INF] Setting log keys to: [DCP Replicate WS WSFrame]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lbl-log-levels"><a class="anchor" href="#lbl-log-levels"></a>Log Levels</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When debugging, setting the <em>console log&#8217;s</em> log-level to <code>debug</code> or <code>trace</code> can provide valuable additional information
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Console logs have six levels of verbosity&#8201;&#8212;&#8201;see: <a href="#tbl-loglevels">Table 1</a>.
The default  <em>log level</em> is <strong><code>none</code></strong></p>
</div>
<div class="paragraph">
<p>Note that the log levels are inclusive, so if you enable <code>info</code> level, then <code>warn</code> and <code>error</code> logs are also enabled.</p>
</div>
<div class="paragraph">
<p>You can define console log levels in the configuration file&#8201;&#8212;&#8201;see <a href="configuration-schema-bootstrap.html#logging-console-log_level" class="xref page">logging.console.log_level</a> <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> and by using the Admin REST API (see: <a href="#eg-setloggingwithapi">Example 2</a>).</p>
</div>
<div class="paragraph">
<p>One approach might be to set your base level in the configuration file and then use the Admin REST API for specific debugging scenarios.</p>
</div>
<table id="tbl-loglevels" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Console Logging&#8201;&#8212;&#8201;Available Log Levels</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Log Level</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">Appearance</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>none</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disables log output</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>error</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[ERR]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays errors that need urgent attention</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>warn</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[WRN]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays warnings that need some attention</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>info</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[INF]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays information about normal operations that don&#8217;t need attention</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>debug</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[DBG]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays verbose output that might be useful when debugging</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>trace</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[TRC]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays extremely verbose output that might be useful when debugging</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="lbl-log-keys"><a class="anchor" href="#lbl-log-keys"></a>Log Keys</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Select log keys relevant to the area you are debugging, providing them as a comma-delimited list, such as: <code>"log_keys": ["HTTP", "CRUD", "Import"]</code> in the config or see <a href="#eg-setloggingwithapi">Example 2</a> for how to provide them using the Admin REST API.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Log keys provide fine-grained control over the information types that Sync Gateway outputs to the console log.
By default, only <strong><code>HTTP</code></strong> related information is enabled, but a range of other keys are available to meet specific diagnostic needs&#8201;&#8212;&#8201;see: <a href="#tbl-logkeylist">Table 2</a>.</p>
</div>
<div class="paragraph">
<p>You can define the required <a href="configuration-schema-bootstrap.html#logging-console-log_keys" class="xref page">logging.console.log_keys</a> within your configuration file and-or use the Admin REST API (see: <a href="#eg-setloggingwithapi">Example 2</a>).</p>
</div>
<table id="tbl-logkeylist" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. List of Available Log Keys</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Log Key</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>*</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This wildcard log key, enables all log keys</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">curl --location --request PUT 'http://localhost:4985/_config' \
--header 'Content-Type: application/json' \
--data-raw '{
    "console": {

      "log_keys": "[\"*\"]

    }
  }'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disable all log keys; no logging output</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">curl --location --request PUT 'http://localhost:4985/_config' \
--header 'Content-Type: application/json' \
--data-raw '{
    "console": {

        "log_keys": "[\"none\"]

    }
  }'</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin processes in Sync Gateway.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anytime an access() call is made in the sync function.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Auth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Bucket</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sync Gateway interactions with the bucket (trace level only).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactions with Sync Gateway&#8217;s in-memory channel cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Changes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processing of /{db}/_changes requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CRUD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates made by Sync Gateway to documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">DCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCP-feed processing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event processing (webhooks).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">gocb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All logging emitted by the GoCB SDK</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All requests made to the Sync Gateway REST APIs.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">HTTP+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional information about HTTP requests (response times, status codes).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Import</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This log key can be useful to troubleshoot why a given document was not successfully imported.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All logging from Javascript.
This includes: sync function, import filters, webhook filter function, and custom inter-Sync&#160;Gateway&#160;replication conflict resolvers</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Migrate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logs messages that show when old inline document metadata is upgraded to xattrs</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query is used for Sync Gateway code related to N1QL queries</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Replicate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log messages related to replications between Sync Gateways (using sg-replicate).
This tag cannot be used for replications initiated by Couchbase Lite.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">SGCluster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log messages related to the sharded import and HA sg-replicate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activity which relates to synchronization between Couchbase Lite and Sync Gateway</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">SyncMsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can be used for additional Sync logging output</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">WS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Websocket replication log messages</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">WSFrame</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can be used for additional WS logging output</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="lbl-log-color"><a class="anchor" href="#lbl-log-color"></a>Set Log Color</h3>
<div class="paragraph">
<p>To use color for log output based on log level, set  <a href="configuration-schema-bootstrap.html#logging-console-color_enabled" class="xref page">logging.console.color_enabled</a> to <code>true</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setting is always disabled on Windows for compatibility reasons.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="lbl-log-redirect"><a class="anchor" href="#lbl-log-redirect"></a>Redirect Console Log</h3>
<div class="paragraph">
<p>You can easily redirect the console log output to a file.
This can be useful not only for diagnostic sessions, but also when you have specialized logging requirements, such as centralized logging.
Just redirect the output and then apply your own log collection mechanism to feed that data elsewhere&#8201;&#8212;&#8201;see <a href="#eg-console-log-redirect">Example 3</a>.</p>
</div>
<div id="eg-console-log-redirect" class="exampleblock">
<div class="title">Example 3. Console Log Redirection</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># Start Sync Gateway and redirect console output to a file
./sync-gateway &gt; my_sg_logs.txt 2&gt;&amp;1

# Start log collection to send to a centralized log aggregator.
logcollector my_sg_logs.txt</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lbl-continuous-logging"><a class="anchor" href="#lbl-continuous-logging"></a>Continuous Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>In this section</strong>: <a href="#lbl-logoutputs">Log File Outputs</a>  |  <a href="#lbl-logrotate">Log File Rotation</a></p>
</div>
<div class="paragraph">
<p><em>Continuous logging</em> produces a set of log files aimed primarily at providing appropriate diagnostic information for the Couchbase Support team should their intervention be required.
You define continuous logging settings in the configuration file&#8201;&#8212;&#8201;see: <a href="#sample-log-cfg">Example 1</a>.</p>
</div>
<div class="paragraph">
<p>With continuous logging the logs for each level are written to <a href="#lbl-logoutputs">separate log files</a>&#8201;&#8212;&#8201;see: <a href="#tbl-contlogoutputs">Table 3</a>.
You can set individual retention policies for each log-level.</p>
</div>
<div class="sect2">
<h3 id="lbl-logoutputs"><a class="anchor" href="#lbl-logoutputs"></a>Log File Outputs</h3>
<div class="paragraph">
<p>The log files output from continuous logging are intended <strong>solely</strong> for the use of <em>Couchbase Support</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you require special log handling, for example for centralized logging, then use the <a href="#lbl-log-redirect">Redirect Console Log</a> feature to create a log file for this purpose from the console output stream.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sync Gateway produces four separate log files, split by log level.
Each log file has its own guaranteed retention period - as shown in <a href="#tbl-contlogoutputs">Table 3</a></p>
</div>
<div class="paragraph">
<p>You can collect the log files, for analysis by Couchbase Support when diagnosing Sync Gateway issues, using <a href="sgcollect-info.html" class="xref page">SGCollect Info</a>.</p>
</div>
<table id="tbl-contlogoutputs" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Continuos Logging - Log File Outputs</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Log File</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Level</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">Default enabled</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">Default max_age</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">Minimum max_age</p></th>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical error messages.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sg_error.log</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">360 Days</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">180 Days</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">WARN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Something is wrong but SG can still service requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sg_warn.log</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">180 Days</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">90 Days</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Important diagnostics for support and customers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sg_info.log</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6 Days</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">3 Days</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">DEBUG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lower level development analysis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sg_debug.log</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 Days</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 Day</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Each log level and its parameters are defined using the <a href="configuration-schema-bootstrap.html#logging-console-log_level" class="xref page">logging.console.log_level</a> property.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="lbl-logrotate"><a class="anchor" href="#lbl-logrotate"></a>Log File Rotation</h3>
<div class="paragraph">
<p>Log files are <em>rotated</em> when they exceed a threshold <code>max_size</code> (megabytes).
Once rotated, they are compressed (gzip) to reduce the disk usage.</p>
</div>
<div class="paragraph">
<p>Aged logs are cleaned up once their age exceeds <code>max_age</code> days&#8201;&#8212;&#8201;see: <a href="#tbl-contlogoutputs">Table 3</a></p>
</div>
<div class="paragraph">
<p>Configure log rotation using the <a href="configuration-schema-bootstrap.html#logging-console-rotation" class="xref page">logging.console.rotation</a> property.</p>
</div>
<div class="paragraph">
<p>For pre-2.1 log rotation&#8201;&#8212;&#8201;see:
<a href="#2.0@sync-gateway::logging.adoc" class="xref unresolved">Pre 2.1 Log Rotation</a></p>
</div>
<hr>
<h5 id="" class="discrete"></h5>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">API Topics</div>
<ul>
<li>
<p><a href="rest-api.html" class="xref page">Public REST API</a></p>
</li>
<li>
<p><a href="rest-api-admin.html" class="xref page">Admin REST API</a></p>
</li>
<li>
<p><a href="rest-api-metrics.html" class="xref page">Metrics REST API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="ulist">
<div class="title">Reference</div>
<ul>
<li>
<p><a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap</a></p>
</li>
<li>
<p><a href="configuration-schema-database.html" class="xref page">Database</a></p>
</li>
<li>
<p><a href="configuration-schema-db-security.html" class="xref page">Database Security</a></p>
</li>
<li>
<p><a href="configuration-schema-access-control.html" class="xref page">Access Control</a></p>
</li>
<li>
<p><a href="configuration-schema-import-filter.html" class="xref page">Import Filter</a></p>
</li>
<li>
<p><a href="configuration-schema-isgr.html" class="xref page">Inter-Sync&#160;Gateway Replication</a></p>
</li>
<li>
<p><a href="configuration-properties-legacy.html" class="xref page">Legacy Pre-3.0 Configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-4"><a class="anchor" href="#-4"></a></h6>
<div class="paragraph">
<div class="title">Community</div>
<p><a href="https://forums.couchbase.com/c/mobile/14">Mobile Forum</a> |
<a href="https://blog.couchbase.com/">Blog</a> |
<a href="https://blog.couchbase.com/category/couchbase-mobile/?ref=blog-menu">Blog (Mobile)</a> |
<a href="https://docs.couchbase.com/tutorials/">Tutorials</a></p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Introduced in Sync Gateway version 2.1
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. For legacy Pre-3.0 see <a href="configuration-properties-legacy.html" class="xref page">legacy Pre-3.0 configuration</a>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Mobile","components":["sync-gateway"],"url":"/home/mobile.html","latestVersions":{"sync-gateway":"3.0"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/site.js"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
