<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Couchbase Lite on Java&#8201;&#8212;&#8201;Installing | Couchbase Capella Staging Docs</title>
<link rel="canonical" href="https://docs.stage.nonprod-project-avengers.com/couchbase-lite/2.8/java/gs-install.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Couchbase Lite on Java -- a framework for developing offline-first Java applications for mobile and edge">
<meta name="keywords" content="mobile edge nosql api Java JVM web-app device-app">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="couchbase-lite">
<meta name="dcterms.identifier" content="2.8">
<meta name="page-url" content="/couchbase-lite/2.8/java/gs-install.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.stage.nonprod-project-avengers.com/cloud/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/hakimcassimally/couchbase/docs-couchbase-lite/modules/java/pages/gs-install.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Couchbase Lite</a></li>
<li class="crumb"><a href="quickstart.html">Java</a></li>
<li class="crumb">Start Here!</li>
<li class="crumb"><a href="gs-install.html">Install</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Couchbase Lite on Java&#8201;&#8212;&#8201;Installing</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/_partials/_std-cbl-hdr.adoc - include::shared-mobile::partial$_attributes-shared.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/_partials/_glossary-links.adoc - include::shared-mobile::partial$_attributes-shared.adoc[]</p>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Description&#8201;&#8212;&#8201;<em>Couchbase Lite on Java&#8201;&#8212;&#8201;a framework for developing offline-first Java applications for mobile and edge</em><br>
<em>Abstract&#8201;&#8212;&#8201;This content provides instructions that enable you to deploy Couchbase Lite on java</em><br>
Related Content&#8201;&#8212;&#8201;<a href="gs-install.html" class="xref page">Install</a> | <a href="gs-prereqs.html" class="xref page">Prerequisites</a> | <a href="gs-build.html" class="xref page">Build and Run</a></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="get-started"><a class="anchor" href="#get-started"></a>GET STARTED</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite on Java enables development and deployment of Couchbase Lite applications to a JVM environment.
You can deploy to a desktop or web server (for example, {gpWebServerEnv}), including embedded {gpWebServerEnv} deployments.</p>
</div>
<div class="paragraph">
<p>Use this page to familiarize yourself with the product, its components, deployment, and use.</p>
</div>
<div class="paragraph">
<p>You will learn:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Where to get the necessary binaries&#8201;&#8212;&#8201;<a href="#where-to-get-binaries">Where to Get Binaries</a></p>
</li>
<li>
<p>What the binaries contain&#8201;&#8212;&#8201;<a href="#using-downloaded-binaries">Using Downloaded Binaries</a></p>
</li>
<li>
<p>How to deploy {cbl} on Java&#8201;&#8212;&#8201;<a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</li>
<li>
<p>How to use {cbl} on Java to create a simple application&#8201;&#8212;&#8201;<a href="gs-build.html" class="xref page">Build and Run</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We use <em>{gpIDE}</em>, <em>{gpBuildTool}</em>, <em>Maven</em> and <em>{gpWebServerEnv}</em> as tools to build and run the examples presented in this content.
You are free to use the tools of your choice.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="where-to-get-binaries"><a class="anchor" href="#where-to-get-binaries"></a>Where to Get Binaries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{cbl} on Java binaries are available for both Community (CE) and Enterprise (EE) editions from the <em>Maven</em> repositories&#8201;&#8212;&#8201;see: <a href="#preparing-your-build-environment">Preparing Your Build Environment</a> for how.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can download a version in <code>.zip</code> format&#8201;&#8212;&#8201;see: <a href="#using-downloaded-binaries">Using Downloaded Binaries</a> for how.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-your-build-environment"><a class="anchor" href="#preparing-your-build-environment"></a>Preparing Your Build Environment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Planning to sync with a {svr}?</p>
<div class="paragraph">
<p>You will need to have runnable instances of {svr} and {sg} installed.
If you have not already done so see <a href="#preparatory-steps">Preparatory Steps</a></p>
</div>
</li>
<li>
<p>Running on Microsoft Windows?</p>
<div class="paragraph">
<p>Windows requires C&#43;&#43; runtime installed.
Please install the Visual C&#43;&#43; Redistribution package from this link:
<a href="https://www.microsoft.com/en-us/download/details.aspx?id=52685" class="bare">https://www.microsoft.com/en-us/download/details.aspx?id=52685</a></p>
</div>
</li>
<li>
<p>Running on Linux?</p>
<div class="paragraph">
<p>You must have loaded the shared libraries as described in <a href="#additional-steps-for-linux">Additional Steps for Linux</a></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="assumptions"><a class="anchor" href="#assumptions"></a>Assumptions</h3>
<div class="paragraph">
<p>This section shows how to set up and use {cbl} on Java to build desktop and web applications using {gpBuildTool}, Maven, {gpWebServerEnv} and {gpIDE} Community Edition.</p>
</div>
<div class="paragraph">
<p>It assumes a familiarity with these products, however you are free to use your own choice of development tools.</p>
</div>
<div class="paragraph">
<p>The contents of your <code>build.gradle</code> file will depend on the type of project you are building, whether you are using Community or Enterprise edition and whether you prefer to use Maven-distributed binaries or a zip download.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you wish to use a downloaded zip instead of Maven then see - <a href="#using-downloaded-binaries">Using Downloaded Binaries</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are deploying to Linux, you will need the {cbl} <code>support</code> library, which is available <em>only</em> on the zip download distributable&#8201;&#8212;&#8201;see <a href="#additional-steps-for-linux">Additional Steps for Linux</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id="bmkUsingMavenRepos"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="defining-dependencies-and-repositories"><a class="anchor" href="#defining-dependencies-and-repositories"></a>Defining Dependencies and Repositories</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_console-app-development"></a>Console App Development</p>
</li>
<li>
<p><a id="tabset1_web-app-development"></a>Web App Development</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_console-app-development">
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project folder</p>
</li>
<li>
<p>Initialize it for a Gradle Java application</p>
</li>
<li>
<p>Include the following in the <code>build.gradle</code> file:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Community edition</dt>
<dd>
<div class="paragraph">
<p>Compile options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '1.8' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility 1.8
    sourceCompatibility 1.8

//   ... other section content as required by user
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dependencies</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:${version}"

//   ... other section content as required by user
}</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Enterprise Edition</dt>
<dd>
<div class="paragraph">
<p>Compile options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '1.8' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility 1.8
    sourceCompatibility 1.8

//   ... other section content as required by user
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dependencies</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java-ee:${version}"

//   ... other section content as required by user
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repositories</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}

//   ... other section content as required by user
    }</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Open the project folder in {gpIDE} and import the {gpBuildTool} settings.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you don&#8217;t have auto-import set for Gradle projects, then accept the   <strong>Import Gradle Project</strong> prompt that is displayed bottom-right of the screen
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note the Gradle menu at the extreme right of the screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/GradleMenuWebApp.png" alt="GradleMenuWebApp" width="300">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>That&#8217;s it. You&#8217;re all set to start building your own {cbl} on Java applications&#8201;&#8212;&#8201;see <a href="#Building a Getting Started App">[Building a Getting Started App]</a> for an example of how to do that.</p>
</div>
<div class="listingblock">
<div class="title">Sample build.gradle content</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Define the main class for the application.
application {mainClassName = 'gettingstarted.GettingStarted'}

plugins {
    id 'java'
    id 'application'
}

// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '1.8' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility 1.8
    sourceCompatibility 1.8

//   ... other section content as required by user
}

dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java-ee:${version}"

//   ... other section content as required by user
    }

repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}

//   ... other section content as required by user
    }</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_web-app-development">
<div class="paragraph">
<p>This section explains how to set-up a build project to create {cbl} on Java web apps using {gpBuildTool} and {gpIDE}.</p>
</div>
<div class="paragraph">
<p><strong>The WebApp Build Environment</strong></p>
</div>
<div class="paragraph">
<p>In our examples here we build and deploy web apps using a {gpBuildTool} plugin based on the <code>com.bmuschko.tomcat</code> plugin. It provides a simple {gpWebServerEnv} harness that can be used from within {gpIDEce} or the command-line.</p>
</div>
<div class="paragraph">
<p>Of course if you are using {gpIDEee} you can use its integrated tomcat features to achieve the same results.</p>
</div>
<div class="paragraph">
<p>For more about this plugin and its use see <a href="#using-the-gradle-webapp-plugin">Using the Gradle WebApp Plugin</a></p>
</div>
<div class="paragraph">
<p><a id="bmkMultCblJapps"></a>
<strong>Running multiple {cbl} on Java web apps</strong>
Each web application has its own *class loader (WebappX). This loads the classes, jars, and resources found in the application&#8217;s <code>WEB-INF/classes</code> and <code>WEB-INF/lib</code> folders, together with any shared jar files from <code>$CATALINA_BASE/lib</code>&#8201;&#8212;&#8201;see <a href="https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html">tomcat documentation</a> for more.</p>
</div>
<div class="paragraph">
<p>So, if you are running multiple {cbl} web applications, deploy your {cbl} on Java library <code>&lt;pathToCbl&gt;/libs</code> to <code>$CATALINA_BASE/lib</code>. This means you do not need to deploy it in each web app and <strong>minimizes the size of each app</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Configuring {cbl} logging functionality will affect the logging of all web applications as the <em>common class loader</em> shares <em>{cbl} Console, File</em> and <em>Custom logging functionalities</em>  across all  web apps.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For information about building a WAR file see <a href="#deploying-a-war-file-to-tomcat">Deploying a WAR file to tomcat</a></p>
</div>
<div class="paragraph">
<p><strong>Prerequisites</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure your build environment matches the runtime {gpWebServerEnv} environment. Specifically, that the Java and  {gpWebServerEnv} versions are the same.</p>
</li>
<li>
<p>If your {gpWebServerEnv} server runs Linux, declare the <em>shared libraries</em> (<code>&lt;pathToCbl&gt;/support</code>&#8201;&#8212;&#8201; as discussed in <a href="#bmkLinuxSharedLibs">Additional Steps for Linux</a>) in the <code>$CATALINA_HOME/bin/setenv.sh</code> script file.</p>
</li>
<li>
<p>Ensure the {cbl} jars (<code>&lt;pathToCbl&gt;/lib</code>) are on the executable path within {gpWebServerEnv}&#8201;&#8212;&#8201;see: <a href="#bmkMultCblJapps">Running multiple {cbl} on Java web apps</a></p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This also means you should declare the dependencies as <code>providedCompile</code> to avoid them being bundled into the <code>WEB-INF/libs</code> folder
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project folder and initialize it for a Gradle Java application</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">gradle init</code></pre>
</div>
</div>
</li>
<li>
<p>Create your <code>build.gradle</code> file, including the following repositories and dependencies:</p>
<div class="ulist">
<ul>
<li>
<p>For Community edition</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:${major}.{minor}"

//   ... other section content as required by user
}</code></pre>
</div>
</div>
</li>
<li>
<p>For Enterprise Edition</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}

//   ... other section content as required by user
    }
dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java-ee:${version}"

//   ... other section content as required by user
    }</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open the project folder in {gpIDE} and import the {gpBuildTool} settings.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you don&#8217;t have auto-import set for Gradle projects, then accept the   <strong>Import Gradle Project</strong> prompt that is displayed bottom-right of the screen
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note the Gradle menu at the extreme right of the screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/GradleMenuWebApp.png" alt="GradleMenuWebApp" width="300">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to deploy your app to a local tomcat container then see <a href="#deploying-a-war-file-to-tomcat">Deploying a WAR file to tomcat</a></p>
</div>
<div class="paragraph">
<p>That&#8217;s it. You&#8217;re all set to start building your own {cbl} on Java applications&#8201;&#8212;&#8201;see <a href="#Building a Getting Started App">[Building a Getting Started App]</a> for an example of how to do that.</p>
</div>
<div class="listingblock">
<div class="title">Sample build.gradle content</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy" data-source-url="https://github.com/osfameron/docs-couchbase-lite/blob/undefined/modules/java/examples/code_snippets/Examples.java">
ext{
  TOMCAT_VERSION="9.0.24"
}

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'com.bmuschko.tomcat'

sourceCompatibility = 1.8

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.bmuschko:gradle-tomcat-plugin:2.5'
    }
}

repositories {
    mavenCentral()
}

dependencies {
    //  Use for Enterprise version
    compileOnly "com.couchbase.lite:couchbase-lite-java-ee:2.7.0"
    //  Use for community versions
    //    compileOnly "com.couchbase.lite:couchbase-lite-java:2.7.0"
    compileOnly "javax.servlet:javax.servlet-api:4.0.1"
    tomcat "org.apache.tomcat.embed:tomcat-embed-core:${TOMCAT_VERSION}",
        "org.apache.tomcat.embed:tomcat-embed-logging-juli:9.0.0.M6",
        "org.apache.tomcat.embed:tomcat-embed-jasper:${TOMCAT_VERSION}"
}

tomcat {
    httpPort = 8080
    httpProtocol = 'org.apache.coyote.http11.Http11Nio2Protocol'
    ajpProtocol  = 'org.apache.coyote.ajp.AjpNio2Protocol'
    contextPath = '/'
}

[tomcatRun, tomcatRunWar].each { task -&gt;
    fileTree("libs").visit { FileVisitDetails details -&gt;
        task.additionalRuntimeResources &lt;&lt; file(details.file.path)
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supplementary-information"><a class="anchor" href="#supplementary-information"></a>SUPPLEMENTARY INFORMATION</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="preparatory-steps"><a class="anchor" href="#preparatory-steps"></a>Preparatory Steps</h3>
<div class="paragraph">
<p><a id="bmkSetupSyncAndServer"></a></p>
</div>
<div class="paragraph">
<p><strong>Install {svr} and {sg}</strong></p>
</div>
<div class="paragraph">
<p>Before you can run any {cbl} on Java app you will need to have runnable instances of {svr} and {sg}.
If you have not already done so:</p>
</div>
<div class="paragraph">
<p>Install <em>{svr}</em> and <em>{sg}</em>&#8201;&#8212;&#8201;see <a href="gs-install.html" class="xref page">Install</a></p>
</div>
<div class="paragraph">
<p><strong>Create the Getting Started App Database</strong></p>
</div>
<div class="olist {orderedList}">
<ol class="{orderedList}">
<li>
<p>Within {svr}, create a bucket named getting-started.cblite2</p>
<div class="paragraph">
<p>For instructions&#8201;&#8212;&#8201;see <a href="#sync-gateway::get-started-prepare&.adoc#8212;&#8203;page.adoc#lbl-create-bucket" class="xref unresolved">Create a Bucket</a></p>
</div>
</li>
<li>
<p>Create a RBAC user for {sg}</p>
<div class="paragraph">
<p>For instructions&#8201;&#8212;&#8201;see <a href="#sync-gateway::get-started-prepare&.adoc#8212;&#8203;page.adoc#lbl-create-rbac-user" class="xref unresolved">Create an RBAC User</a></p>
</div>
<div class="ulist {steps2}">
<ul class="{steps2}">
<li>
<p>Set username to <code>sync-gateway</code></p>
</li>
<li>
<p>Set password to <code>password</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="using-downloaded-binaries"><a class="anchor" href="#using-downloaded-binaries"></a>Using Downloaded Binaries</h3>
<div class="paragraph">
<p><strong>Package Contents</strong></p>
</div>
<div class="paragraph">
<p>The download package contains a license file, jar libraries for the appropriate edition of the {cbl} and a set of Linux <em>shared libraries</em>.</p>
</div>
<div class="paragraph">
<p>Get the download package from the <a href="https://www.couchbase.com/downloads?family=mobile">Couchbase Downloads</a> page.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Community Edition&#8201;&#8212;&#8201;couchbase-lite-java-2.8.3</p>
</li>
<li>
<p>Enterprise Edition&#8201;&#8212;&#8201;couchbase-lite-java-ee-2.8.3</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When unpacked the package contains the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>lib</code> folder containing all necessary JAR files:</p>
<div class="ulist">
<ul>
<li>
<p>couchbase-lite-java-2.8.3 or for EE couchbase-lite-java-ee-2.8.3</p>
</li>
<li>
<p>okhttp-3.14.7.jar</p>
</li>
<li>
<p>okio-1.17.2.jar</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>support</code> folder containing the Linux native libraries:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This means you do not need to download and-or build compatible versions of system libraries for the Linux platform of choice.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>libz</code> (requires zlib v.1.2.11+)</p>
</li>
<li>
<p><code>libC&#43;&#43;</code> requires libc++ v.3.6.0+)</p>
</li>
<li>
<p><code>libicu</code> (requires ICU4C v.5.4.1+)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Go back to <a href="#get-started">GET STARTED</a></p>
</div>
<div class="paragraph">
<p><strong>Steps</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the <em>zip</em> file from the <a href="https://www.couchbase.com/downloads?family=mobile">Couchbase Downloads</a> page.</p>
</li>
<li>
<p>Unpack the downloaded file to a location accessible to&#8201;&#8212;&#8201;and usable by&#8201;&#8212;&#8201;your chosen <strong>build</strong> environment.</p>
<div class="paragraph">
<p>We&#8217;ll refer to that location&#8201;&#8212;&#8201;<code>&lt;your dir&gt;/couchbase-lite-java-2.8.3</code>&#8201;&#8212;&#8201;as the <code>&lt;pathToCbl&gt;</code>.</p>
</div>
</li>
<li>
<p>Include the following dependency in your <code>build.gradle</code> file, you can remove any {cbl} Maven references:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">Dependencies {
  implementation fileTree(include: ['*.jar'], dir: &lt;pathToCbl&gt;/lib&gt;
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Where &lt;pathToCbl&gt; is the location of the downloaded {cbl} library.</p>
</div>
<div class="listingblock">
<div class="title">Sample build gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java" data-source-url="https://github.com/osfameron/docs-couchbase-lite/blob/undefined/modules/java/examples/code_snippets/Examples.java">apply plugin: 'java'
apply plugin: 'jar'
// apply plugin: 'war'
sourceCompatibility = 1.8
repositories {
  jcenter()
}
dependencies {
    implementation fileTree(dir: 'libs', include: '*.jar')
    compileOnly "javax.servlet:javax.servlet-api:4.0.1"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="additional-steps-for-linux"><a class="anchor" href="#additional-steps-for-linux"></a>Additional Steps for Linux</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="using-native-libraries-for-linux"><a class="anchor" href="#using-native-libraries-for-linux"></a>Using Native Libraries for Linux</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="bmkLinuxSharedLibs"></a>
In addition to setting-up your build environment, you also need to make the supplied native libraries (<code>&lt;pathToCbl/support</code>) available:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These libraries are provided only in the <code>.zip</code> distributable.
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_web-service-tomcat"></a>Web Service/Tomcat</p>
</li>
<li>
<p><a id="tabset2_desktop"></a>Desktop</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_web-service-tomcat">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <em>native libraries</em> (<code>&lt;pathToCbl&gt;/support</code>) to a location accessible to&#8201;&#8212;&#8201;and usable by&#8201;&#8212;&#8201;your build and runtime environments.</p>
</li>
<li>
<p>Add the following libraries to the <code>LD_LIBRARY_PATH</code> in `$CATALINA_BASE/bin/setenv.sh:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the setenv.sh file doesn’t exist, you will need to create a new file.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">LD_LIBRARY_PATH=&lt;pathToCbl&gt;/support/linux/x86_64/:$LD_LIBRARY_PATH</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_desktop">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <em>native libraries</em> (<code>&lt;pathToCbl&gt;/support</code>) to a location accessible to&#8201;&#8212;&#8201;and usable by&#8201;&#8212;&#8201;your build and runtime environments.</p>
</li>
<li>
<p>Add the following libraries to the <code>LD_LIBRARY_PATH</code> in the .bashrc file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">export LD_LIBRARY_PATH=&lt;pathToCbl&gt;/support/linux/x86_64/:$LD_LIBRARY_PATH</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
<div class="sect2">
<h3 id="using-the-gradle-webapp-plugin"><a class="anchor" href="#using-the-gradle-webapp-plugin"></a>Using the Gradle WebApp Plugin</h3>
<div class="paragraph">
<p>The simplest way to build and deploy your {cbl} on Java web app is to use a {gpBuildTool} plugin that provides a simple {gpWebServerEnv} harness.</p>
</div>
<div class="paragraph">
<p>Our examples are based on the <code>com.bmuschko.tomcat</code> plugin&#8201;&#8212;&#8201;see <a href="https://github.com/bmuschko/gradle-tomcat-plugin">com.bmuschko.tomcat on Github</a>.</p>
</div>
<div class="paragraph">
<p>Including the plugin in your <code>build.gradle</code> file make a number of tomcat tasks available to you. View them using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">./gradlew tasks</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows that the following web application tasks are now available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tomcatJasper</code> - Runs the JSP compiler and turns JSP pages into Java source.</p>
</li>
<li>
<p><code>tomcatRun</code> - Uses your files as and where they are and deploys them to Tomcat.</p>
</li>
<li>
<p><code>tomcatRunWar</code> - Assembles the web app into a war and deploys it to Tomcat.</p>
</li>
<li>
<p><code>tomcatStop</code> - Stops Tomcat.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, to run the app use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-Java hljs" data-lang="Java">tomcatRun</code></pre>
</div>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-a-war-file-to-tomcat"><a class="anchor" href="#deploying-a-war-file-to-tomcat"></a>Deploying a WAR file to tomcat</h3>
<div class="paragraph">
<p>If you want to deploy your web app to a local Tomcat instance then you will need to generate a WAR file.
However, you should note that when creating a war file, if you use the <code>implementation</code> dependency type then your <em>Couchbase Lite</em> jar files will be bundled into WEB-INF/lib of the web application.
To exclude Couchbase Lite jar files from getting bundled and to use Couchbase Lite in multiple web applications, change the dependency type from <strong><code>implementation</code></strong> to <strong><code>providedCompile</code></strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can do this using the Gradle command below from within your project folder:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bashrc hljs" data-lang="bashrc">./gradlew war</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The generated war file will be at &lt;PROJECT ROOT&gt;/build/libs.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Deploy the war file to Tomcat, by copying it to $CATALINA_BASE/webapps</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use Tomcat’s Manager App to deploy the war file&#8201;&#8212;&#8201;see <a href="https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html">tomcat&#8217;s Manager App</a> documentation for more detail.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>To use common class loader approach to load Couchbase Lite libraries, copy all of the Couchbase Lite jar files in $CATALINA_BASE/lib.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For linux platform see also&#8201;&#8212;&#8201;<a href="#additional-steps-for-linux">Additional Steps for Linux</a>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Back to <a href="#preparing-your-build-environment">Preparing Your Build Environment</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id=""><a class="anchor" href="#"></a></h6>
<div class="ulist">
<div class="title">How to . . .</div>
<ul>
<li>
<p><a href="gs-prereqs.html" class="xref page">Prerequisites</a></p>
</li>
<li>
<p><a href="gs-install.html" class="xref page">Install</a></p>
</li>
<li>
<p><a href="gs-build.html" class="xref page">Build and Run</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">Learn more . . .</div>
<ul>
<li>
<p><a href="database.html" class="xref page">Databases</a></p>
</li>
<li>
<p><a href="document.html" class="xref page">Documents</a></p>
</li>
<li>
<p><a href="blob.html" class="xref page">Blobs</a></p>
</li>
<li>
<p><a href="replication.html" class="xref page">Remote Sync using Sync Gateway</a></p>
</li>
<li>
<p><a href="conflict.html" class="xref page">Handling Data Conflicts</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="paragraph">
<div class="title">Dive Deeper . . .</div>
<p>Unresolved include directive in modules/ROOT/pages/_partials/_related-content.adoc - include::shared-mobile::partial$_related-content.adoc[]</p>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Mobile","components":["couchbase-lite"],"url":"/home/mobile.html","latestVersions":{"couchbase-lite":"2.8"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
